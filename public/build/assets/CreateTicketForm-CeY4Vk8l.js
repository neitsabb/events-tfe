import{j as r,q as g,r as v,W as N}from"./app-qijFDi4_.js";import{F as u}from"./Field-DkKyvpSt.js";import{B as f}from"./button-Bw7rl0P3.js";import{f as k,h as y}from"./dialog-33l9bfr1.js";import{I as m}from"./label-BFttLCBn.js";import{T as C}from"./textarea-DUaatCdz.js";import{t as q}from"./use-toast-B9KH-dZ1.js";import{c as d}from"./utils-Di4cwZjX.js";import{b as w,S}from"./react-icons.esm-B_QH4jkH.js";import"./index-BJuTwMzb.js";import"./index-1QdY4h2j.js";const p=({children:n})=>r.jsx("div",{className:"flex gap-4 w-full",children:n}),z=({eventId:n,setOpen:i,data:e})=>{g().props;const[c,x]=v.useState((e==null?void 0:e.type)??void 0),{setData:o,post:a,errors:l}=N({type:c,name:(e==null?void 0:e.name)??"",price:(e==null?void 0:e.price)??0,quantity:(e==null?void 0:e.quantity)??0,description:(e==null?void 0:e.description)??""}),h=()=>{x(void 0),i(!1)},j=s=>{x(s),o("type",s)},b=s=>{if(s.preventDefault(),e){a(route("events.tickets.update",{event:n,ticketId:e.id}),{onSuccess:t=>{i(!1),q({title:"Succès",description:t.props.flash.success})},onError:t=>{console.error("errors",t)}});return}else{a(route("events.tickets.store",{event:n}),{onSuccess:()=>i(!1),onError:t=>{console.error("errors",t)}});return}};return r.jsxs("form",{onSubmit:b,className:"space-y-8",children:[r.jsx(T,{type:c,setType:j}),c!==void 0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(p,{children:r.jsx(u,{className:"shrink-0",label:"Nom",id:"name",errors:l,children:r.jsx(m,{id:"name",required:!0,defaultValue:e==null?void 0:e.name,onChange:s=>o("name",s.target.value)})})}),r.jsx(p,{children:r.jsx(u,{className:"shrink-0",label:"Description",id:"description",errors:l,required:!1,children:r.jsx(C,{id:"description",defaultValue:e==null?void 0:e.description,onChange:s=>o("description",s.target.value)})})}),r.jsxs(p,{children:[r.jsx(u,{className:"w-1/2",id:"price",label:"Prix",errors:l,children:r.jsx(m,{id:"price",type:"string",defaultValue:e==null?void 0:e.price,onChange:s=>o("price",Number(s.target.value)),required:!0})}),r.jsx(u,{className:"w-1/2",id:"quantity",label:"Quantité",errors:l,children:r.jsx(m,{id:"quantity",type:"number",defaultValue:e==null?void 0:e.quantity,required:!0,onChange:s=>o("quantity",Number(s.target.value))})})]})]}),r.jsx(D,{type:c,cancel:h})]})},T=({type:n,setType:i})=>r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:d("w-full bg-accent hover:bg-accent-foreground/10 font-medium transition-colors text-accent-foreground rounded-md p-4 text-sm cursor-pointer",{"bg-accent-foreground/10 ring-2 ring-offset-2 ring-primary":n==="admission"}),onClick:()=>{i("admission")},children:[r.jsx(w,{className:"w-4 h-4 mb-2"}),"Billet d'entrée",r.jsxs("p",{className:"hidden md:block text-xs font-normal text-accent-foreground",children:["Un billet d'entrée, un pass VIP etc. ",r.jsx("br",{})," Une personne par billet."]})]}),r.jsxs("div",{className:d("w-full bg-accent hover:bg-accent-foreground/10 font-medium transition-colors text-accent-foreground rounded-md p-4 text-sm cursor-pointer",{"bg-accent-foreground/10 ring-2 ring-offset-2 ring-primary":n==="extra"}),onClick:()=>{i("extra")},children:[r.jsx(S,{className:"w-4 h-4 mb-2"}),"Extra",r.jsx("p",{className:"hidden md:block text-xs font-normal text-accent-foreground",children:"Des tickets boissons, Une place de parking, etc."})]})]}),D=({type:n,cancel:i})=>{const{props:e}=g();return n!==void 0&&r.jsxs(k,{children:[r.jsx(y,{asChild:!0,children:r.jsx(f,{variant:"ghost",onClick:i,children:"Annuler"})}),r.jsxs(f,{type:"submit",disabled:e.permissions.event.tickets.update===!1,children:["Sauvegarder ",n==="extra"?"l'extra":"le billet"]})]})};export{z as CreateTicketForm};
