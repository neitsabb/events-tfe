import{j as e,r as n,W as h}from"./app-B8O0964f.js";import{I as b,E as D,L as E}from"./GeneralStep-B8nxnN4M.js";import{F as u}from"./Field-WCVMzMtq.js";import{F as j}from"./FormSection-zw9xs3eg.js";import{B as w,e as _}from"./button-YW7AvVGk.js";import{I as N}from"./label-DwsXhYQC.js";import{T as F}from"./textarea-D9dkLJXe.js";import{t as v}from"./use-toast-DmJmvKL4.js";import"./index.modern-en2QlzKk.js";import"./createLucideIcon-CH3lftcQ.js";import"./format-C8Xkf-na.js";import"./fr-CXO3BpIY.js";import"./chevron-right-Bcdrrr3U.js";import"./index-GGXSu8f6.js";import"./command-BWe1PTSE.js";import"./index-BYucJXNH.js";import"./index-CS2GB-k9.js";import"./index-DrwCB3Lc.js";import"./dialog-DmYbyGqV.js";import"./select-DUoClp4t.js";import"./index-DxdC_eHi.js";import"./react-icons.esm-C09Qz6R5.js";import"./check-CkFbTOeR.js";import"./badge-BB2NzPwa.js";import"./x-DhpbibXZ.js";import"./card-BX3UTc7A.js";const se=({event:t})=>e.jsxs(e.Fragment,{children:[e.jsx(y,{event:t}),e.jsx(k,{event:t}),e.jsx(C,{event:t})]}),y=({event:t})=>{const[r,m]=n.useState(t.tags),{data:o,setData:d,errors:s,processing:l,post:p}=h({name:t.name,description:t.description,tags:r,image:t.image}),c=a=>{a.preventDefault(),p(route("events.update",{id:t.id}),{onSuccess:({props:{flash:i}})=>{v({title:"Succès",description:i.success})},onError:i=>{console.log("Error while updating",i)}})};n.useEffect(()=>{d("tags",r)},[r]);const[x,g]=n.useState(!1);return e.jsxs(j,{title:"Paramètres de votre événement",description:"Vous pouvez modifier les paramètres généraux ici.",disabled:l,onSubmit:c,children:[e.jsx(u,{label:"Image de couverture",id:"cover",errors:s,required:!1,children:e.jsxs("div",{className:"flex items-center gap-4",children:[t.image&&e.jsx("img",{src:t.image,alt:"cover",className:"w-20 h-20 rounded-full shrink-0"}),x?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlForor:"dropzone-file",className:"flex flex-col items-center justify-center w-full h-36 border-input border  shadow-sm  rounded-md  cursor-pointer ",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("svg",{className:"w-8 h-8 mb-4 text-gray-400 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-400",children:"SVG, PNG, JPG ou JPEG. Max 2Mo"})]}),e.jsx("input",{id:"dropzone-file",type:"file",className:"hidden",onChange:a=>{d("image",a.target.files[0])}})]})}):e.jsx(w,{variant:"outline",onClick:()=>g(!0),children:"Modifier l'image"})]})}),e.jsx(u,{label:"Nom de votre événement",id:"name",errors:s,children:e.jsx(N,{name:"name",value:o.name,onChange:a=>d("name",a.target.value)})}),e.jsxs(u,{label:"Description",id:"description",required:!1,errors:s,children:[e.jsx(F,{name:"description",value:o.description,onChange:a=>d("description",a.target.value)}),s.description?e.jsx("p",{className:"text-xs text-red-500",children:s.description}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Écrivez quelques phrases à propos de votre événement."})]}),e.jsx(u,{label:"Mots clés",id:"tags",errors:s,children:e.jsx(b,{tags:r,setTags:m})})]})},k=({event:t})=>{const[r,m]=n.useState(new Date(t.start_date)),[o,d]=n.useState(new Date(t.end_date)),{data:s,setData:l,errors:p,processing:c,post:x}=h({start_date:r,end_date:o});n.useEffect(()=>{l(i=>({...i,start_date:r})),l(i=>({...i,end_date:o}))},[r,o]);const g=i=>{i.preventDefault();const S={...s,start_date:r,end_date:o};x(route("events.update",{id:t.id}),{data:S,preserveScroll:!0,onSuccess:({props:{flash:f}})=>{v({title:"Succès",description:f.success})},onError:f=>{console.log("Error while updating",f)}})},a=n.useMemo(()=>s.start_date!==t.start_date||s.end_date!==t.end_date,[s,t]);return e.jsx(j,{title:"Quand se déroule votre événement ?",description:"Vous pouvez modifier les dates et heures de votre événement ici.",disabled:!a||c,onSubmit:g,children:e.jsx(u,{label:"",id:"date",errors:p,children:e.jsx(D,{startDate:r,setStartDate:m,endDate:o,setEndDate:d})})})},C=({event:t})=>{const[r,m]=n.useState({lat:t.coords.lat,lng:t.coords.lng}),{setData:o,errors:d,post:s}=h({location:{street:"",city:"",country:"",zip_code:""},coords:{lat:r.lat,lng:r.lng}});n.useEffect(()=>{o("coords",r)},[r]);const l=p=>{p.preventDefault(),s(route("events.update",{id:t.id}),{preserveScroll:!0,onSuccess:({props:{flash:c}})=>{v({title:"Succès",description:c.success})},onError:c=>{console.log("Error while updating",c)}})};return e.jsx(j,{title:"Où se déroule votre événement ?",description:"Vous pouvez modifier le lieu de votre événement ici.",onSubmit:l,children:e.jsx(E,{setData:o,errors:d,coords:r,defaultValue:_(t.location),setCoords:m})})};export{se as GeneralForm};
