import{r as D,c as Ee,g as Ce,j as s,W as ke,q as Me,a as De,y as ye}from"./app-BSg7tcV-.js";import{A as Te}from"./AdminHeader-CRV36qwl.js";import{d as Ae,e as _e,i as qe,b as Re,c as Fe}from"./dialog-BHgiNgJn.js";import{d as ge,P as xe,e as Be,f as Le,a as Ge}from"./react-icons.esm-CCC4ONUB.js";import{B as q}from"./button-CrsewIh4.js";import{T as X}from"./Title-D8vjgEtZ.js";import{B as Ve}from"./badge-DiBsXd1D.js";import{a as N}from"./enums-0bE_G0vF.js";import{G as Qe,D as ze,L as We}from"./GeneralStep-CluPZpyd.js";import{L as B,I as L}from"./label-CCQKrebs.js";import{c as Ye}from"./utils-B0fn8ihL.js";import{A as Ue}from"./AuthenticatedLayout-D4oF8_0h.js";import{t as be}from"./use-toast-DL6Jf7Lj.js";var je={exports:{}};(function(x,k){(function(S,b){x.exports=b(D)})(typeof self<"u"?self:Ee,function(S){return function(b){var p={};function v(f){if(p[f])return p[f].exports;var e=p[f]={i:f,l:!1,exports:{}};return b[f].call(e.exports,e,e.exports,v),e.l=!0,e.exports}return v.m=b,v.c=p,v.d=function(f,e,t){v.o(f,e)||Object.defineProperty(f,e,{enumerable:!0,get:t})},v.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,e){if(1&e&&(f=v(f)),8&e||4&e&&typeof f=="object"&&f&&f.__esModule)return f;var t=Object.create(null);if(v.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:f}),2&e&&typeof f!="string")for(var c in f)v.d(t,c,(function(a){return f[a]}).bind(null,c));return t},v.n=function(f){var e=f&&f.__esModule?function(){return f.default}:function(){return f};return v.d(e,"a",e),e},v.o=function(f,e){return Object.prototype.hasOwnProperty.call(f,e)},v.p="",v(v.s=2)}([function(b,p){b.exports=S},function(b,p,v){var f={linear:function(e,t,c,a){return(c-t)*e/a+t},easeInQuad:function(e,t,c,a){return(c-t)*(e/=a)*e+t},easeOutQuad:function(e,t,c,a){return-(c-t)*(e/=a)*(e-2)+t},easeInOutQuad:function(e,t,c,a){var o=c-t;return(e/=a/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,c,a){return(c-t)*(e/=a)*e*e+t},easeOutCubic:function(e,t,c,a){return(c-t)*((e=e/a-1)*e*e+1)+t},easeInOutCubic:function(e,t,c,a){var o=c-t;return(e/=a/2)<1?o/2*e*e*e+t:o/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,c,a){return(c-t)*(e/=a)*e*e*e+t},easeOutQuart:function(e,t,c,a){return-(c-t)*((e=e/a-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,c,a){var o=c-t;return(e/=a/2)<1?o/2*e*e*e*e+t:-o/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,c,a){return(c-t)*(e/=a)*e*e*e*e+t},easeOutQuint:function(e,t,c,a){return(c-t)*((e=e/a-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,c,a){var o=c-t;return(e/=a/2)<1?o/2*e*e*e*e*e+t:o/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,c,a){var o=c-t;return-o*Math.cos(e/a*(Math.PI/2))+o+t},easeOutSine:function(e,t,c,a){return(c-t)*Math.sin(e/a*(Math.PI/2))+t},easeInOutSine:function(e,t,c,a){return-(c-t)/2*(Math.cos(Math.PI*e/a)-1)+t},easeInExpo:function(e,t,c,a){return e==0?t:(c-t)*Math.pow(2,10*(e/a-1))+t},easeOutExpo:function(e,t,c,a){var o=c-t;return e==a?t+o:o*(1-Math.pow(2,-10*e/a))+t},easeInOutExpo:function(e,t,c,a){var o=c-t;return e===0?t:e===a?t+o:(e/=a/2)<1?o/2*Math.pow(2,10*(e-1))+t:o/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,c,a){return-(c-t)*(Math.sqrt(1-(e/=a)*e)-1)+t},easeOutCirc:function(e,t,c,a){return(c-t)*Math.sqrt(1-(e=e/a-1)*e)+t},easeInOutCirc:function(e,t,c,a){var o=c-t;return(e/=a/2)<1?-o/2*(Math.sqrt(1-e*e)-1)+t:o/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,c,a){var o,h,I,d=c-t;return I=1.70158,e===0?t:(e/=a)==1?t+d:((h=0)||(h=.3*a),(o=d)<Math.abs(d)?(o=d,I=h/4):I=h/(2*Math.PI)*Math.asin(d/o),-o*Math.pow(2,10*(e-=1))*Math.sin((e*a-I)*(2*Math.PI)/h)+t)},easeOutElastic:function(e,t,c,a){var o,h,I,d=c-t;return I=1.70158,e===0?t:(e/=a)==1?t+d:((h=0)||(h=.3*a),(o=d)<Math.abs(d)?(o=d,I=h/4):I=h/(2*Math.PI)*Math.asin(d/o),o*Math.pow(2,-10*e)*Math.sin((e*a-I)*(2*Math.PI)/h)+d+t)},easeInOutElastic:function(e,t,c,a){var o,h,I,d=c-t;return I=1.70158,e===0?t:(e/=a/2)==2?t+d:((h=0)||(h=a*.44999999999999996),(o=d)<Math.abs(d)?(o=d,I=h/4):I=h/(2*Math.PI)*Math.asin(d/o),e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e*a-I)*(2*Math.PI)/h)*-.5+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*a-I)*(2*Math.PI)/h)*.5+d+t)},easeInBack:function(e,t,c,a,o){return o===void 0&&(o=1.70158),(c-t)*(e/=a)*e*((o+1)*e-o)+t},easeOutBack:function(e,t,c,a,o){return o===void 0&&(o=1.70158),(c-t)*((e=e/a-1)*e*((o+1)*e+o)+1)+t},easeInOutBack:function(e,t,c,a,o){var h=c-t;return o===void 0&&(o=1.70158),(e/=a/2)<1?h/2*(e*e*((1+(o*=1.525))*e-o))+t:h/2*((e-=2)*e*((1+(o*=1.525))*e+o)+2)+t},easeInBounce:function(e,t,c,a){var o=c-t;return o-f.easeOutBounce(a-e,0,o,a)+t},easeOutBounce:function(e,t,c,a){var o=c-t;return(e/=a)<.36363636363636365?o*(7.5625*e*e)+t:e<.7272727272727273?o*(7.5625*(e-=.5454545454545454)*e+.75)+t:e<.9090909090909091?o*(7.5625*(e-=.8181818181818182)*e+.9375)+t:o*(7.5625*(e-=.9545454545454546)*e+.984375)+t},easeInOutBounce:function(e,t,c,a){var o=c-t;return e<a/2?.5*f.easeInBounce(2*e,0,o,a)+t:.5*f.easeOutBounce(2*e-a,0,o,a)+.5*o+t}};b.exports=f},function(b,p,v){b.exports=v(3)},function(b,p,v){v.r(p),v.d(p,"ReactConfetti",function(){return he});var f,e,t=v(0),c=v.n(t),a=v(1),o=v.n(a);function h(n,i){return n+Math.random()*(i-n)}function I(n,i){for(var l=0;l<i.length;l++){var r=i[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function d(n,i,l){return i in n?Object.defineProperty(n,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[i]=l,n}(function(n){n[n.Circle=0]="Circle",n[n.Square=1]="Square",n[n.Strip=2]="Strip"})(f||(f={})),function(n){n[n.Positive=1]="Positive",n[n.Negative=-1]="Negative"}(e||(e={}));var K=function(){function n(r,g,u,m){(function(se,oe){if(!(se instanceof oe))throw new TypeError("Cannot call a class as a function")})(this,n),d(this,"context",void 0),d(this,"radius",void 0),d(this,"x",void 0),d(this,"y",void 0),d(this,"w",void 0),d(this,"h",void 0),d(this,"vx",void 0),d(this,"vy",void 0),d(this,"shape",void 0),d(this,"angle",void 0),d(this,"angularSpin",void 0),d(this,"color",void 0),d(this,"rotateY",void 0),d(this,"rotationDirection",void 0),d(this,"getOptions",void 0),this.getOptions=g;var j,O,w=this.getOptions(),R=w.colors,A=w.initialVelocityX,_=w.initialVelocityY;this.context=r,this.x=u,this.y=m,this.w=h(5,20),this.h=h(5,20),this.radius=h(5,10),this.vx=typeof A=="number"?h(-A,A):h(A.min,A.max),this.vy=typeof _=="number"?h(-_,0):h(_.min,_.max),this.shape=(j=0,O=2,Math.floor(j+Math.random()*(O-j+1))),this.angle=h(0,360)*Math.PI/180,this.angularSpin=h(-.2,.2),this.color=R[Math.floor(Math.random()*R.length)],this.rotateY=h(0,1),this.rotationDirection=h(0,1)?e.Positive:e.Negative}var i,l;return i=n,(l=[{key:"update",value:function(){var r=this.getOptions(),g=r.gravity,u=r.wind,m=r.friction,j=r.opacity,O=r.drawShape;this.x+=this.vx,this.y+=this.vy,this.vy+=g,this.vx+=u,this.vx*=m,this.vy*=m,this.rotateY>=1&&this.rotationDirection===e.Positive?this.rotationDirection=e.Negative:this.rotateY<=-1&&this.rotationDirection===e.Negative&&(this.rotationDirection=e.Positive);var w=.1*this.rotationDirection;if(this.rotateY+=w,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=j,this.context.lineCap="round",this.context.lineWidth=2,O&&typeof O=="function")O.call(this,this.context);else switch(this.shape){case f.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case f.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case f.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}])&&I(i.prototype,l),n}();function y(n,i,l){return i in n?Object.defineProperty(n,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[i]=l,n}var C=function n(i,l){var r=this;(function(u,m){if(!(u instanceof m))throw new TypeError("Cannot call a class as a function")})(this,n),y(this,"canvas",void 0),y(this,"context",void 0),y(this,"getOptions",void 0),y(this,"x",0),y(this,"y",0),y(this,"w",0),y(this,"h",0),y(this,"lastNumberOfPieces",0),y(this,"tweenInitTime",Date.now()),y(this,"particles",[]),y(this,"particlesGenerated",0),y(this,"removeParticleAt",function(u){r.particles.splice(u,1)}),y(this,"getParticle",function(){var u=h(r.x,r.w+r.x),m=h(r.y,r.h+r.y);return new K(r.context,r.getOptions,u,m)}),y(this,"animate",function(){var u=r.canvas,m=r.context,j=r.particlesGenerated,O=r.lastNumberOfPieces,w=r.getOptions(),R=w.run,A=w.recycle,_=w.numberOfPieces,se=w.debug,oe=w.tweenFunction,ce=w.tweenDuration;if(!R)return!1;var le=r.particles.length,Y=A?le:j,ue=Date.now();if(Y<_){O!==_&&(r.tweenInitTime=ue,r.lastNumberOfPieces=_);for(var pe=r.tweenInitTime,Ie=oe(ue-pe>ce?ce:Math.max(0,ue-pe),Y,_,ce),de=Math.round(Ie-Y),me=0;me<de;me++)r.particles.push(r.getParticle());r.particlesGenerated+=de}return se&&(m.font="12px sans-serif",m.fillStyle="#333",m.textAlign="right",m.fillText("Particles: ".concat(le),u.width-10,u.height-20)),r.particles.forEach(function(U,ve){U.update(),(U.y>u.height||U.y<-100||U.x>u.width+100||U.x<-100)&&(A&&Y<=_?r.particles[ve]=r.getParticle():r.removeParticleAt(ve))}),le>0||Y<_}),this.canvas=i;var g=this.canvas.getContext("2d");if(!g)throw new Error("Could not get canvas context");this.context=g,this.getOptions=l};function G(n,i){var l=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);i&&(r=r.filter(function(g){return Object.getOwnPropertyDescriptor(n,g).enumerable})),l.push.apply(l,r)}return l}function M(n){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?G(Object(l),!0).forEach(function(r){T(n,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(l)):G(Object(l)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(l,r))})}return n}function $(n,i){for(var l=0;l<i.length;l++){var r=i[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function T(n,i,l){return i in n?Object.defineProperty(n,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[i]=l,n}var V={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:o.a.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0},Z=function(){function n(r,g){var u=this;(function(j,O){if(!(j instanceof O))throw new TypeError("Cannot call a class as a function")})(this,n),T(this,"canvas",void 0),T(this,"context",void 0),T(this,"_options",void 0),T(this,"generator",void 0),T(this,"rafId",void 0),T(this,"setOptionsWithDefaults",function(j){var O={confettiSource:{x:0,y:0,w:u.canvas.width,h:0}};u._options=M(M(M({},O),V),j),Object.assign(u,j.confettiSource)}),T(this,"update",function(){var j=u.options,O=j.run,w=j.onConfettiComplete,R=u.canvas,A=u.context;O&&(A.fillStyle="white",A.clearRect(0,0,R.width,R.height)),u.generator.animate()?u.rafId=requestAnimationFrame(u.update):(w&&typeof w=="function"&&u.generator.particlesGenerated>0&&w.call(u,u),u._options.run=!1)}),T(this,"reset",function(){u.generator&&u.generator.particlesGenerated>0&&(u.generator.particlesGenerated=0,u.generator.particles=[],u.generator.lastNumberOfPieces=0)}),T(this,"stop",function(){u.options={run:!1},u.rafId&&(cancelAnimationFrame(u.rafId),u.rafId=void 0)}),this.canvas=r;var m=this.canvas.getContext("2d");if(!m)throw new Error("Could not get canvas context");this.context=m,this.generator=new C(this.canvas,function(){return u.options}),this.options=g,this.update()}var i,l;return i=n,(l=[{key:"options",get:function(){return this._options},set:function(r){var g=this._options&&this._options.run,u=this._options&&this._options.recycle;this.setOptionsWithDefaults(r),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof r.recycle=="boolean"&&r.recycle&&u===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof r.run=="boolean"&&r.run&&g===!1&&this.update()}}])&&$(i.prototype,l),n}();function ee(n){return function(i){if(Array.isArray(i))return z(i)}(n)||function(i){if(typeof Symbol<"u"&&Symbol.iterator in Object(i))return Array.from(i)}(n)||P(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function E(n){return(E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(n)}function Q(){return(Q=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(n[r]=l[r])}return n}).apply(this,arguments)}function H(n,i){var l=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);i&&(r=r.filter(function(g){return Object.getOwnPropertyDescriptor(n,g).enumerable})),l.push.apply(l,r)}return l}function J(n){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?H(Object(l),!0).forEach(function(r){W(n,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(l)):H(Object(l)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(l,r))})}return n}function te(n,i){return function(l){if(Array.isArray(l))return l}(n)||function(l,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(l)))){var g=[],u=!0,m=!1,j=void 0;try{for(var O,w=l[Symbol.iterator]();!(u=(O=w.next()).done)&&(g.push(O.value),!r||g.length!==r);u=!0);}catch(R){m=!0,j=R}finally{try{u||w.return==null||w.return()}finally{if(m)throw j}}return g}}(n,i)||P(n,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function P(n,i){if(n){if(typeof n=="string")return z(n,i);var l=Object.prototype.toString.call(n).slice(8,-1);return l==="Object"&&n.constructor&&(l=n.constructor.name),l==="Map"||l==="Set"?Array.from(n):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?z(n,i):void 0}}function z(n,i){(i==null||i>n.length)&&(i=n.length);for(var l=0,r=new Array(i);l<i;l++)r[l]=n[l];return r}function we(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function Oe(n,i){for(var l=0;l<i.length;l++){var r=i[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function fe(n,i){return(fe=Object.setPrototypeOf||function(l,r){return l.__proto__=r,l})(n,i)}function Se(n){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var l,r=re(n);if(i){var g=re(this).constructor;l=Reflect.construct(r,arguments,g)}else l=r.apply(this,arguments);return Pe(this,l)}}function Pe(n,i){return!i||E(i)!=="object"&&typeof i!="function"?ne(n):i}function ne(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function re(n){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)})(n)}function W(n,i,l){return i in n?Object.defineProperty(n,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[i]=l,n}var Ne=c.a.createRef(),ie=function(n){(function(u,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(m&&m.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),m&&fe(u,m)})(g,n);var i,l,r=Se(g);function g(u){var m;we(this,g);for(var j=arguments.length,O=new Array(j>1?j-1:0),w=1;w<j;w++)O[w-1]=arguments[w];return W(ne(m=r.call.apply(r,[this,u].concat(O))),"canvas",c.a.createRef()),W(ne(m),"confetti",void 0),m.canvas=u.canvasRef||Ne,m}return i=g,(l=[{key:"componentDidMount",value:function(){if(this.canvas.current){var u=ae(this.props)[0];this.confetti=new Z(this.canvas.current,u)}}},{key:"componentDidUpdate",value:function(){var u=ae(this.props)[0];this.confetti&&(this.confetti.options=u)}},{key:"componentWillUnmount",value:function(){this.confetti&&this.confetti.stop(),this.confetti=void 0}},{key:"render",value:function(){var u=te(ae(this.props),2),m=u[0],j=u[1],O=J({zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0},j.style);return c.a.createElement("canvas",Q({width:m.width,height:m.height,ref:this.canvas},j,{style:O}))}}])&&Oe(i.prototype,l),g}(t.Component);function ae(n){var i={},l={},r=[].concat(ee(Object.keys(V)),["confettiSource","drawShape","onConfettiComplete"]),g=["canvasRef"];for(var u in n){var m=n[u];r.includes(u)?i[u]=m:g.includes(u)?g[u]=m:l[u]=m}return[i,l,{}]}W(ie,"defaultProps",J({},V)),W(ie,"displayName","ReactConfetti");var he=c.a.forwardRef(function(n,i){return c.a.createElement(ie,Q({canvasRef:i},n))});p.default=he}]).default})})(je);var Ke=je.exports;const He=Ce(Ke),Je=({tickets:x,setTickets:k,extras:S,setExtras:b,errors:p})=>{const v=()=>k([...x,{name:"",quantity:0,price:0}]),f=()=>b([...S,{name:"",quantity:0,price:0}]),e=c=>k(x.filter((a,o)=>o!==c)),t=c=>b(S.filter((a,o)=>o!==c));return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(X,{level:"h4",title:"Billets"}),s.jsx("p",{className:"text-xs text-primary/50",children:"Vous pouvez ajouter autant de types de billets que vous le souhaitez."})]}),s.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[s.jsx(B,{htmlFor:"name",className:"col-span-3 text-sm",children:"Nom"}),s.jsx(B,{htmlFor:"quantity",className:"text-sm",children:"Quantité"}),s.jsx(B,{htmlFor:"price",className:"text-sm text-right md:text-left",children:"Prix"}),x.map((c,a)=>s.jsxs("div",{className:"col-span-6 grid grid-cols-6 gap-2",children:[s.jsx(L,{name:"name",placeholder:"Billet",value:c.name,onChange:o=>{const h=[...x];h[a].name=o.target.value,k(h)},className:"col-span-3"}),s.jsx(L,{type:"number",name:"quantity",placeholder:"0",value:c.quantity,onChange:o=>{const h=[...x];h[a].quantity=parseInt(o.target.value,10),k(h)}}),s.jsx(L,{type:"number",name:"price",value:c.price,placeholder:"0.00",onChange:o=>{const h=[...x];h[a].price=parseFloat(o.target.value),k(h)}}),s.jsx(q,{variant:"ghost",className:"w-fit",onClick:()=>e(a),children:s.jsx(ge,{})})]},a))]}),s.jsxs(q,{variant:"outline",onClick:v,children:[s.jsx(xe,{className:"mr-2"})," Ajouter un billet"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(X,{level:"h4",title:"Extras"}),s.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[s.jsx(B,{htmlFor:"name",className:"col-span-3 text-sm",children:"Nom"}),s.jsx(B,{htmlFor:"quantity",className:"text-sm",children:"Quantité"}),s.jsx(B,{htmlFor:"price",className:"text-right md:text-left ",children:"Prix"}),S.map((c,a)=>s.jsxs("div",{className:"col-span-6 grid grid-cols-6 gap-2",children:[s.jsx(L,{name:"name",placeholder:"Extra",value:c.name,onChange:o=>{const h=[...S];h[a].name=o.target.value,b(h)},className:"col-span-3"}),s.jsx(L,{type:"number",name:"quantity",placeholder:"0",value:c.quantity,onChange:o=>{const h=[...S];h[a].quantity=parseInt(o.target.value,10),b(h)}}),s.jsx(L,{type:"number",name:"price",value:c.price,placeholder:"0.00",onChange:o=>{const h=[...S];h[a].price=parseFloat(o.target.value),b(h)}}),s.jsx(q,{variant:"ghost",className:"w-fit",onClick:()=>t(a),children:s.jsx(ge,{})})]},a))]}),s.jsxs(q,{variant:"outline",onClick:f,children:[s.jsx(xe,{className:"mr-2"})," Ajouter un extra"]})]}),(p==null?void 0:p.extras)&&s.jsx("p",{className:"text-red-500 text-xs mt-6",children:p.extras})]})},Xe=({currentStep:x,steps:k})=>{const S=p=>p<x,b=p=>p===x;return s.jsx("div",{className:"py-4",children:s.jsx("nav",{className:"flex justify-center","aria-label":"Progress",children:s.jsx("ol",{role:"list",children:k.map((p,v)=>s.jsx("li",{children:S(v)?s.jsx(q,{variant:"none",className:"group",children:s.jsxs("span",{className:"flex items-start",children:[s.jsx("span",{className:"relative flex h-5 w-5 flex-shrink-0 items-center justify-center",children:s.jsx(Be,{className:"h-full w-full text-primary group-hover:text-primary/50","aria-hidden":"true"})}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-500 group-hover:text-gray-900",children:p.label})]})}):b(v)?s.jsxs(q,{variant:"none",className:"group !p-0",children:[s.jsxs("span",{className:"relative flex h-5 w-5 flex-shrink-0 items-center justify-center","aria-hidden":"true",children:[s.jsx("span",{className:"absolute h-4 w-4 rounded-full bg-primary/15"}),s.jsx("span",{className:"relative block h-2 w-2 rounded-full bg-primary"})]}),s.jsx("span",{className:"ml-3 text-sm font-medium text-primary",children:p.label})]}):s.jsx(q,{variant:"none",className:"group !p-0",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"relative flex h-5 w-5 flex-shrink-0 items-center justify-center","aria-hidden":"true",children:s.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-300 group-hover:bg-gray-400"})}),s.jsx("p",{className:"ml-3 text-sm font-medium text-gray-500 group-hover:text-gray-900",children:p.label})]})})},p.key))})})})},F=[{key:N.GENERAL,label:"Général",idx:0},{key:N.DATE,label:"Date",idx:1},{key:N.LOCATION,label:"Localisation",idx:2},{key:N.TICKETS,label:"Types de billets",idx:3},{key:N.RESUME,label:"Résumé",idx:4}],$e=({event:x,setSuccess:k})=>{const[S,b]=D.useState(0),[p,v]=D.useState({title:x.name,description:x.description||"",tags:[],image:null}),[f,e]=D.useState(new Date),[t,c]=D.useState(new Date),[a,o]=D.useState([{name:"Early Bird",quantity:100,price:5}]),[h,I]=D.useState([{name:"Parking",quantity:750,price:5},{name:"Voucher Boissons (4 pieces)",quantity:500,price:2}]),[d,K]=D.useState({lat:0,lng:0}),[y,C]=D.useState({}),{data:G,setData:M,post:$}=ke({location:{street:"",city:"",country:"",zip_code:""},start_date:f,end_date:t,tickets:a,extras:h,coords:d,title:p.title,description:p.description,tags:p.tags,image:p.image}),T=()=>!f||!t?(C({...y,date:"Veuillez sélectionner une date ou marquer comme 'Date à déterminer'."}),!1):f>t?(C({...y,date:"La date de fin ne peut pas être antérieure à la date de début."}),!1):t.getTime()-f.getTime()<36e5?(C({...y,date:"La durée de l'événement doit être d'au moins 1 heure."}),!1):(C({}),!0),V=()=>!d.lat||!d.lng||d.lat===0&&d.lng===0?(C({...y,location:"Veuillez sélectionner une localisation."}),!1):G.location.city?(C({}),!0):(C({...y,location:"Veuillez sélectionner une ville."}),!1),Z=()=>a.length===0?(C({...y,tickets:"Veuillez ajouter au moins un type de billet."}),!1):a.some(P=>P.quantity==0)||h.some(P=>P.quantity==0)?(C({...y,tickets:"Veuillez ajouter une quantité pour chaque type de billet ou d'extra."}),!1):(C({}),!0),ee=()=>{if(!p.title)return C({...y,name:"Veuillez renseigner un nom pour votre événement."}),!1;if(p.image){if(p.image.size>2097152)return C({...y,image:"L'image ne doit pas dépasser 2Mo."}),!1;if(p.image.type!=="image/jpeg"&&p.image.type!=="image/png"&&p.image.type!=="image/jpg"&&p.image.type!=="image/svg"&&p.image.type!=="image/webp"&&p.image.type!=="image/avif")return C({...y,image:"L'image doit être de type WEBP, AVIF, SVG, PNG, JPG ou JPEG."}),!1}return C({}),!0},E=F[S],Q=F.findIndex(P=>P.key===E.key),H=()=>{let P=!1;E.key===N.GENERAL?P=ee():E.key===N.DATE?P=T():E.key===N.LOCATION?P=V():E.key===N.TICKETS&&(P=Z()),P&&(S===F.length-2&&J(),b(z=>z+1))},J=()=>{$(route("events.configure",{id:x.id}),{data:{...G,tags:p.tags},onSuccess:P=>{k(!0),console.log(P)},onError:P=>{console.error(P)}})},te=()=>{E.key===N.TICKETS&&K({lat:0,lng:0}),b(P=>P-1)};return D.useEffect(()=>{M("start_date",f),M("end_date",t)},[f,t]),D.useEffect(()=>{M("tickets",a),M("extras",h)},[a,h]),D.useEffect(()=>{M("coords",d)},[d]),D.useEffect(()=>{M("title",p.title),M("description",p.description),M("tags",p.tags),M("image",p.image),console.log("new tags",p.tags)},[p]),s.jsxs("div",{className:"flex items-stretch justify-between h-full",children:[s.jsxs("div",{className:"hidden md:block border-r border-border p-4 w-1/4 ",children:[s.jsx(Ae,{children:x.name}),s.jsx(_e,{}),s.jsx(Xe,{currentStep:S,steps:F})]}),s.jsxs("div",{className:"p-6 md:p-8 w-full md:w-3/4 h-full",children:[s.jsxs("div",{className:"overflow-y-auto h-[490px]",children:[S<F.length-1&&s.jsxs(Ve,{variant:"outline",className:"mb-1",children:["Étape ",Q+1," / ",F.length]}),s.jsx(X,{title:E.key===N.GENERAL?"Informations générales":N.DATE?"Quand aura lieu votre événement ?":E.key===N.LOCATION?"Où aura lieu votre événement ?":E.key===N.TICKETS?"Quels types de billets proposez-vous ?":"",level:"h2"}),s.jsxs("div",{className:"mt-4 px-1",children:[E.key===N.GENERAL&&s.jsx(Qe,{informations:p,setInformations:v,errors:y}),E.key===N.DATE&&s.jsx(ze,{errors:y,startDate:f,setStartDate:e,endDate:t,setEndDate:c}),E.key===N.LOCATION&&s.jsx(We,{setData:M,errors:y,coords:d,setCoords:K}),E.key===N.TICKETS&&s.jsx(Je,{errors:y,extras:h,setExtras:I,tickets:a,setTickets:o}),E.key===N.RESUME&&s.jsx("div",{className:"w-full h-full flex justify-center items-center ",children:s.jsx(X,{level:"h1",title:"Vos paramètres sont sauvegardés",className:" absolute top-[50%] translate-y-[-50%] block"})})]})]}),E.key!==N.RESUME&&s.jsx("div",{className:"flex justify-end items-center mt-auto",children:s.jsxs("div",{className:"flex items-center gap-4",children:[S>0&&s.jsxs(q,{variant:"outline",onClick:te,children:[s.jsx(Le,{}),"Précédent"]}),s.jsxs(q,{onClick:H,className:"",children:[S===F.length-1?"Sauvegarder":"Suivant",s.jsx(Ge,{})]})]})})]})]})},Ze=({event:x})=>{const k=x.status==="not_configured",[S,b]=D.useState(!1);return s.jsxs(s.Fragment,{children:[S&&s.jsx(He,{width:window.innerWidth,height:window.innerHeight,recycle:!1}),s.jsx(qe,{open:k,children:s.jsx(Re,{className:"w-full md:max-w-4xl !p-0 bg-gray-50 md:h-[600px]",children:s.jsx(Fe,{children:s.jsx($e,{event:x,setSuccess:b})})})})]})},et=[{title:"Vue d'ensemble",panel:"overview"},{title:"Transactions",panel:"transactions"},{title:"Billets",panel:"tickets"},{title:"Paramètres",panel:"settings"}],dt=({event:x,children:k})=>{const{url:S,props:{permissions:b}}=Me(),p=()=>{ye.post(route("events.publish",{event:x.id}),{},{replace:!0,onSuccess:({props:{flash:f}})=>{be({title:"Succès",description:f.success})},onError:f=>{be({title:"Erreur",description:f.error})}})},v=()=>{ye.get(route("events.preview",{event:x.id}))};return s.jsxs(Ue,{container:!1,children:[s.jsx(Te,{className:"border-b border-border",title:x.name,actions:s.jsxs(s.Fragment,{children:[s.jsx(q,{onClick:v,variant:"secondary",children:"Prévisualiser"}),s.jsx(q,{onClick:p,children:x.status==="draft"?"Publier":"Dépublier"})]})}),s.jsx(Ze,{event:x}),s.jsx("nav",{className:"bg-accent text-accent-foreground/60 border-b border-border",children:s.jsx("div",{className:"container flex justify-between items-center h-14",children:s.jsx("ul",{className:"flex space-x-6 overflow-x-auto",children:et.map((f,e)=>{var c;const t=window.location.pathname.split("/").pop()===x.id?f.panel==="overview":f.panel===((c=window.location)==null?void 0:c.pathname.split("/").pop());return s.jsx("li",{children:s.jsx(De,{as:"button",href:f.panel==="#"?"#":route("events.show",{event:x.id,panel:f.panel!=="overview"?f.panel:""}),disabled:f.panel==="settings"&&!b.event.settings,className:Ye("w-auto whitespace-nowrap text-sm font-medium disabled:cursor-not-allowed",{"text-primary":t}),children:s.jsx("span",{children:f.title})})},e)})})})}),s.jsx("div",{className:"container relative",children:k})]})};export{dt as E};
