import{r as D,c as Ee,g as Ne,j as l,W as Ce,q as ke,a as Me,y as ye}from"./app-B8O0964f.js";import{A as De}from"./AdminHeader-q0EgjawA.js";import{d as Te,e as Ae,i as _e,b as Re,c as Be}from"./dialog-DmYbyGqV.js";import{d as qe,P as Fe,e as Le,f as Ge,a as Ve}from"./react-icons.esm-C09Qz6R5.js";import{B,c as Qe}from"./button-YW7AvVGk.js";import{T as ue}from"./Title-BDowuLx7.js";import{B as ze}from"./badge-BB2NzPwa.js";import{a as I}from"./enums-DllFtvDX.js";import{G as We,D as Ye,L as Ue}from"./GeneralStep-B8nxnN4M.js";import{L as ce,I as le}from"./label-DwsXhYQC.js";import{A as Ke}from"./AuthenticatedLayout-fqukK14P.js";import{t as ge}from"./use-toast-DmJmvKL4.js";var be={exports:{}};(function(x,k){(function(S,b){x.exports=b(D)})(typeof self<"u"?self:Ee,function(S){return function(b){var h={};function v(u){if(h[u])return h[u].exports;var e=h[u]={i:u,l:!1,exports:{}};return b[u].call(e.exports,e,e.exports,v),e.l=!0,e.exports}return v.m=b,v.c=h,v.d=function(u,e,t){v.o(u,e)||Object.defineProperty(u,e,{enumerable:!0,get:t})},v.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},v.t=function(u,e){if(1&e&&(u=v(u)),8&e||4&e&&typeof u=="object"&&u&&u.__esModule)return u;var t=Object.create(null);if(v.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:u}),2&e&&typeof u!="string")for(var s in u)v.d(t,s,(function(a){return u[a]}).bind(null,s));return t},v.n=function(u){var e=u&&u.__esModule?function(){return u.default}:function(){return u};return v.d(e,"a",e),e},v.o=function(u,e){return Object.prototype.hasOwnProperty.call(u,e)},v.p="",v(v.s=2)}([function(b,h){b.exports=S},function(b,h,v){var u={linear:function(e,t,s,a){return(s-t)*e/a+t},easeInQuad:function(e,t,s,a){return(s-t)*(e/=a)*e+t},easeOutQuad:function(e,t,s,a){return-(s-t)*(e/=a)*(e-2)+t},easeInOutQuad:function(e,t,s,a){var c=s-t;return(e/=a/2)<1?c/2*e*e+t:-c/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,s,a){return(s-t)*(e/=a)*e*e+t},easeOutCubic:function(e,t,s,a){return(s-t)*((e=e/a-1)*e*e+1)+t},easeInOutCubic:function(e,t,s,a){var c=s-t;return(e/=a/2)<1?c/2*e*e*e+t:c/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,s,a){return(s-t)*(e/=a)*e*e*e+t},easeOutQuart:function(e,t,s,a){return-(s-t)*((e=e/a-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,s,a){var c=s-t;return(e/=a/2)<1?c/2*e*e*e*e+t:-c/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,s,a){return(s-t)*(e/=a)*e*e*e*e+t},easeOutQuint:function(e,t,s,a){return(s-t)*((e=e/a-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,s,a){var c=s-t;return(e/=a/2)<1?c/2*e*e*e*e*e+t:c/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,s,a){var c=s-t;return-c*Math.cos(e/a*(Math.PI/2))+c+t},easeOutSine:function(e,t,s,a){return(s-t)*Math.sin(e/a*(Math.PI/2))+t},easeInOutSine:function(e,t,s,a){return-(s-t)/2*(Math.cos(Math.PI*e/a)-1)+t},easeInExpo:function(e,t,s,a){return e==0?t:(s-t)*Math.pow(2,10*(e/a-1))+t},easeOutExpo:function(e,t,s,a){var c=s-t;return e==a?t+c:c*(1-Math.pow(2,-10*e/a))+t},easeInOutExpo:function(e,t,s,a){var c=s-t;return e===0?t:e===a?t+c:(e/=a/2)<1?c/2*Math.pow(2,10*(e-1))+t:c/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,s,a){return-(s-t)*(Math.sqrt(1-(e/=a)*e)-1)+t},easeOutCirc:function(e,t,s,a){return(s-t)*Math.sqrt(1-(e=e/a-1)*e)+t},easeInOutCirc:function(e,t,s,a){var c=s-t;return(e/=a/2)<1?-c/2*(Math.sqrt(1-e*e)-1)+t:c/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,s,a){var c,p,E,d=s-t;return E=1.70158,e===0?t:(e/=a)==1?t+d:((p=0)||(p=.3*a),(c=d)<Math.abs(d)?(c=d,E=p/4):E=p/(2*Math.PI)*Math.asin(d/c),-c*Math.pow(2,10*(e-=1))*Math.sin((e*a-E)*(2*Math.PI)/p)+t)},easeOutElastic:function(e,t,s,a){var c,p,E,d=s-t;return E=1.70158,e===0?t:(e/=a)==1?t+d:((p=0)||(p=.3*a),(c=d)<Math.abs(d)?(c=d,E=p/4):E=p/(2*Math.PI)*Math.asin(d/c),c*Math.pow(2,-10*e)*Math.sin((e*a-E)*(2*Math.PI)/p)+d+t)},easeInOutElastic:function(e,t,s,a){var c,p,E,d=s-t;return E=1.70158,e===0?t:(e/=a/2)==2?t+d:((p=0)||(p=a*.44999999999999996),(c=d)<Math.abs(d)?(c=d,E=p/4):E=p/(2*Math.PI)*Math.asin(d/c),e<1?c*Math.pow(2,10*(e-=1))*Math.sin((e*a-E)*(2*Math.PI)/p)*-.5+t:c*Math.pow(2,-10*(e-=1))*Math.sin((e*a-E)*(2*Math.PI)/p)*.5+d+t)},easeInBack:function(e,t,s,a,c){return c===void 0&&(c=1.70158),(s-t)*(e/=a)*e*((c+1)*e-c)+t},easeOutBack:function(e,t,s,a,c){return c===void 0&&(c=1.70158),(s-t)*((e=e/a-1)*e*((c+1)*e+c)+1)+t},easeInOutBack:function(e,t,s,a,c){var p=s-t;return c===void 0&&(c=1.70158),(e/=a/2)<1?p/2*(e*e*((1+(c*=1.525))*e-c))+t:p/2*((e-=2)*e*((1+(c*=1.525))*e+c)+2)+t},easeInBounce:function(e,t,s,a){var c=s-t;return c-u.easeOutBounce(a-e,0,c,a)+t},easeOutBounce:function(e,t,s,a){var c=s-t;return(e/=a)<.36363636363636365?c*(7.5625*e*e)+t:e<.7272727272727273?c*(7.5625*(e-=.5454545454545454)*e+.75)+t:e<.9090909090909091?c*(7.5625*(e-=.8181818181818182)*e+.9375)+t:c*(7.5625*(e-=.9545454545454546)*e+.984375)+t},easeInOutBounce:function(e,t,s,a){var c=s-t;return e<a/2?.5*u.easeInBounce(2*e,0,c,a)+t:.5*u.easeOutBounce(2*e-a,0,c,a)+.5*c+t}};b.exports=u},function(b,h,v){b.exports=v(3)},function(b,h,v){v.r(h),v.d(h,"ReactConfetti",function(){return he});var u,e,t=v(0),s=v.n(t),a=v(1),c=v.n(a);function p(n,i){return n+Math.random()*(i-n)}function E(n,i){for(var o=0;o<i.length;o++){var r=i[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function d(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}(function(n){n[n.Circle=0]="Circle",n[n.Square=1]="Square",n[n.Strip=2]="Strip"})(u||(u={})),function(n){n[n.Positive=1]="Positive",n[n.Negative=-1]="Negative"}(e||(e={}));var Y=function(){function n(r,g,f,m){(function(re,ie){if(!(re instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,n),d(this,"context",void 0),d(this,"radius",void 0),d(this,"x",void 0),d(this,"y",void 0),d(this,"w",void 0),d(this,"h",void 0),d(this,"vx",void 0),d(this,"vy",void 0),d(this,"shape",void 0),d(this,"angle",void 0),d(this,"angularSpin",void 0),d(this,"color",void 0),d(this,"rotateY",void 0),d(this,"rotationDirection",void 0),d(this,"getOptions",void 0),this.getOptions=g;var j,O,w=this.getOptions(),R=w.colors,A=w.initialVelocityX,_=w.initialVelocityY;this.context=r,this.x=f,this.y=m,this.w=p(5,20),this.h=p(5,20),this.radius=p(5,10),this.vx=typeof A=="number"?p(-A,A):p(A.min,A.max),this.vy=typeof _=="number"?p(-_,0):p(_.min,_.max),this.shape=(j=0,O=2,Math.floor(j+Math.random()*(O-j+1))),this.angle=p(0,360)*Math.PI/180,this.angularSpin=p(-.2,.2),this.color=R[Math.floor(Math.random()*R.length)],this.rotateY=p(0,1),this.rotationDirection=p(0,1)?e.Positive:e.Negative}var i,o;return i=n,(o=[{key:"update",value:function(){var r=this.getOptions(),g=r.gravity,f=r.wind,m=r.friction,j=r.opacity,O=r.drawShape;this.x+=this.vx,this.y+=this.vy,this.vy+=g,this.vx+=f,this.vx*=m,this.vy*=m,this.rotateY>=1&&this.rotationDirection===e.Positive?this.rotationDirection=e.Negative:this.rotateY<=-1&&this.rotationDirection===e.Negative&&(this.rotationDirection=e.Positive);var w=.1*this.rotationDirection;if(this.rotateY+=w,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=j,this.context.lineCap="round",this.context.lineWidth=2,O&&typeof O=="function")O.call(this,this.context);else switch(this.shape){case u.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case u.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case u.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}])&&E(i.prototype,o),n}();function y(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}var C=function n(i,o){var r=this;(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,n),y(this,"canvas",void 0),y(this,"context",void 0),y(this,"getOptions",void 0),y(this,"x",0),y(this,"y",0),y(this,"w",0),y(this,"h",0),y(this,"lastNumberOfPieces",0),y(this,"tweenInitTime",Date.now()),y(this,"particles",[]),y(this,"particlesGenerated",0),y(this,"removeParticleAt",function(f){r.particles.splice(f,1)}),y(this,"getParticle",function(){var f=p(r.x,r.w+r.x),m=p(r.y,r.h+r.y);return new Y(r.context,r.getOptions,f,m)}),y(this,"animate",function(){var f=r.canvas,m=r.context,j=r.particlesGenerated,O=r.lastNumberOfPieces,w=r.getOptions(),R=w.run,A=w.recycle,_=w.numberOfPieces,re=w.debug,ie=w.tweenFunction,ae=w.tweenDuration;if(!R)return!1;var oe=r.particles.length,z=A?oe:j,se=Date.now();if(z<_){O!==_&&(r.tweenInitTime=se,r.lastNumberOfPieces=_);for(var pe=r.tweenInitTime,Ie=ie(se-pe>ae?ae:Math.max(0,se-pe),z,_,ae),de=Math.round(Ie-z),me=0;me<de;me++)r.particles.push(r.getParticle());r.particlesGenerated+=de}return re&&(m.font="12px sans-serif",m.fillStyle="#333",m.textAlign="right",m.fillText("Particles: ".concat(oe),f.width-10,f.height-20)),r.particles.forEach(function(W,ve){W.update(),(W.y>f.height||W.y<-100||W.x>f.width+100||W.x<-100)&&(A&&z<=_?r.particles[ve]=r.getParticle():r.removeParticleAt(ve))}),oe>0||z<_}),this.canvas=i;var g=this.canvas.getContext("2d");if(!g)throw new Error("Could not get canvas context");this.context=g,this.getOptions=o};function F(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);i&&(r=r.filter(function(g){return Object.getOwnPropertyDescriptor(n,g).enumerable})),o.push.apply(o,r)}return o}function M(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?F(Object(o),!0).forEach(function(r){T(n,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):F(Object(o)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(o,r))})}return n}function H(n,i){for(var o=0;o<i.length;o++){var r=i[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function T(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}var L={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:c.a.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0},J=function(){function n(r,g){var f=this;(function(j,O){if(!(j instanceof O))throw new TypeError("Cannot call a class as a function")})(this,n),T(this,"canvas",void 0),T(this,"context",void 0),T(this,"_options",void 0),T(this,"generator",void 0),T(this,"rafId",void 0),T(this,"setOptionsWithDefaults",function(j){var O={confettiSource:{x:0,y:0,w:f.canvas.width,h:0}};f._options=M(M(M({},O),L),j),Object.assign(f,j.confettiSource)}),T(this,"update",function(){var j=f.options,O=j.run,w=j.onConfettiComplete,R=f.canvas,A=f.context;O&&(A.fillStyle="white",A.clearRect(0,0,R.width,R.height)),f.generator.animate()?f.rafId=requestAnimationFrame(f.update):(w&&typeof w=="function"&&f.generator.particlesGenerated>0&&w.call(f,f),f._options.run=!1)}),T(this,"reset",function(){f.generator&&f.generator.particlesGenerated>0&&(f.generator.particlesGenerated=0,f.generator.particles=[],f.generator.lastNumberOfPieces=0)}),T(this,"stop",function(){f.options={run:!1},f.rafId&&(cancelAnimationFrame(f.rafId),f.rafId=void 0)}),this.canvas=r;var m=this.canvas.getContext("2d");if(!m)throw new Error("Could not get canvas context");this.context=m,this.generator=new C(this.canvas,function(){return f.options}),this.options=g,this.update()}var i,o;return i=n,(o=[{key:"options",get:function(){return this._options},set:function(r){var g=this._options&&this._options.run,f=this._options&&this._options.recycle;this.setOptionsWithDefaults(r),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof r.recycle=="boolean"&&r.recycle&&f===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof r.run=="boolean"&&r.run&&g===!1&&this.update()}}])&&H(i.prototype,o),n}();function X(n){return function(i){if(Array.isArray(i))return V(i)}(n)||function(i){if(typeof Symbol<"u"&&Symbol.iterator in Object(i))return Array.from(i)}(n)||P(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function N(n){return(N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(n)}function G(){return(G=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])}return n}).apply(this,arguments)}function U(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);i&&(r=r.filter(function(g){return Object.getOwnPropertyDescriptor(n,g).enumerable})),o.push.apply(o,r)}return o}function K(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?U(Object(o),!0).forEach(function(r){Q(n,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):U(Object(o)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(o,r))})}return n}function $(n,i){return function(o){if(Array.isArray(o))return o}(n)||function(o,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(o)))){var g=[],f=!0,m=!1,j=void 0;try{for(var O,w=o[Symbol.iterator]();!(f=(O=w.next()).done)&&(g.push(O.value),!r||g.length!==r);f=!0);}catch(R){m=!0,j=R}finally{try{f||w.return==null||w.return()}finally{if(m)throw j}}return g}}(n,i)||P(n,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function P(n,i){if(n){if(typeof n=="string")return V(n,i);var o=Object.prototype.toString.call(n).slice(8,-1);return o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set"?Array.from(n):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?V(n,i):void 0}}function V(n,i){(i==null||i>n.length)&&(i=n.length);for(var o=0,r=new Array(i);o<i;o++)r[o]=n[o];return r}function je(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function we(n,i){for(var o=0;o<i.length;o++){var r=i[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function fe(n,i){return(fe=Object.setPrototypeOf||function(o,r){return o.__proto__=r,o})(n,i)}function Oe(n){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var o,r=ee(n);if(i){var g=ee(this).constructor;o=Reflect.construct(r,arguments,g)}else o=r.apply(this,arguments);return Se(this,o)}}function Se(n,i){return!i||N(i)!=="object"&&typeof i!="function"?Z(n):i}function Z(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ee(n){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)})(n)}function Q(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}var Pe=s.a.createRef(),te=function(n){(function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),m&&fe(f,m)})(g,n);var i,o,r=Oe(g);function g(f){var m;je(this,g);for(var j=arguments.length,O=new Array(j>1?j-1:0),w=1;w<j;w++)O[w-1]=arguments[w];return Q(Z(m=r.call.apply(r,[this,f].concat(O))),"canvas",s.a.createRef()),Q(Z(m),"confetti",void 0),m.canvas=f.canvasRef||Pe,m}return i=g,(o=[{key:"componentDidMount",value:function(){if(this.canvas.current){var f=ne(this.props)[0];this.confetti=new J(this.canvas.current,f)}}},{key:"componentDidUpdate",value:function(){var f=ne(this.props)[0];this.confetti&&(this.confetti.options=f)}},{key:"componentWillUnmount",value:function(){this.confetti&&this.confetti.stop(),this.confetti=void 0}},{key:"render",value:function(){var f=$(ne(this.props),2),m=f[0],j=f[1],O=K({zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0},j.style);return s.a.createElement("canvas",G({width:m.width,height:m.height,ref:this.canvas},j,{style:O}))}}])&&we(i.prototype,o),g}(t.Component);function ne(n){var i={},o={},r=[].concat(X(Object.keys(L)),["confettiSource","drawShape","onConfettiComplete"]),g=["canvasRef"];for(var f in n){var m=n[f];r.includes(f)?i[f]=m:g.includes(f)?g[f]=m:o[f]=m}return[i,o,{}]}Q(te,"defaultProps",K({},L)),Q(te,"displayName","ReactConfetti");var he=s.a.forwardRef(function(n,i){return s.a.createElement(te,G({canvasRef:i},n))});h.default=he}]).default})})(be);var He=be.exports;const Je=Ne(He),xe=({items:x,setItems:k,errors:S,title:b,placeholder:h,addButtonText:v,onAddItem:u,onRemoveItem:e})=>{const t=(s,a,c)=>{const p=[...x];p[s][a]=c,k(p)};return l.jsxs("div",{className:"space-y-4 overflow-x-hidden overflow-y-auto",children:[l.jsx(ue,{level:"h4",title:b}),l.jsxs("div",{className:"grid grid-cols-6  gap-2",children:[l.jsx(ce,{htmlFor:"name",className:"col-span-2 md:col-span-3 text-sm",children:"Nom"}),l.jsx(ce,{htmlFor:"quantity",className:"col-span-2 md:col-span-1 text-sm",children:"Quantité"}),l.jsx(ce,{htmlFor:"price",className:"text-sm",children:"Prix"}),x.map((s,a)=>l.jsxs("div",{className:"col-span-6 grid grid-cols-6 gap-2",children:[l.jsx(le,{name:"name",placeholder:h,value:s.name,onChange:c=>t(a,"name",c.target.value),className:"col-span-2 md:col-span-3"}),l.jsx(le,{type:"number",name:"quantity",placeholder:"0",value:s.quantity,onChange:c=>t(a,"quantity",parseInt(c.target.value,10)),className:"col-span-2 md:col-span-1"}),l.jsx(le,{type:"number",name:"price",placeholder:"0.00",value:s.price,onChange:c=>t(a,"price",parseFloat(c.target.value))}),l.jsx(B,{variant:"ghost",className:"w-fit",onClick:()=>e(a),children:l.jsx(qe,{})})]},a))]}),l.jsxs(B,{variant:"outline",onClick:u,children:[l.jsx(Fe,{className:"mr-2"})," ",v]}),S&&l.jsx("p",{className:"text-red-500 text-xs mt-6",children:S})]})},Xe=({tickets:x,setTickets:k,extras:S,setExtras:b,errors:h})=>{const v=()=>k([...x,{name:"",quantity:0,price:0}]),u=()=>b([...S,{name:"",quantity:0,price:0}]),e=s=>k(x.filter((a,c)=>c!==s)),t=s=>b(S.filter((a,c)=>c!==s));return l.jsxs("div",{className:"space-y-6",children:[l.jsx(xe,{items:x,setItems:k,errors:h==null?void 0:h.tickets,title:"Billets",placeholder:"Billet",addButtonText:"Ajouter un billet",onAddItem:v,onRemoveItem:e}),l.jsx(xe,{items:S,setItems:b,errors:h==null?void 0:h.extras,title:"Extras",placeholder:"Extra",addButtonText:"Ajouter un extra",onAddItem:u,onRemoveItem:t})]})},$e=({currentStep:x,steps:k})=>{const S=h=>h<x,b=h=>h===x;return l.jsx("div",{className:"py-4",children:l.jsx("nav",{className:"flex justify-center","aria-label":"Progress",children:l.jsx("ol",{role:"list",children:k.map((h,v)=>l.jsx("li",{children:S(v)?l.jsx(B,{variant:"none",className:"group",children:l.jsxs("span",{className:"flex items-start",children:[l.jsx("span",{className:"relative flex h-5 w-5 flex-shrink-0 items-center justify-center",children:l.jsx(Le,{className:"h-full w-full text-primary group-hover:text-primary/50","aria-hidden":"true"})}),l.jsx("span",{className:"ml-3 text-sm font-medium text-gray-500 group-hover:text-gray-900",children:h.label})]})}):b(v)?l.jsxs(B,{variant:"none",className:"group !p-0",children:[l.jsxs("span",{className:"relative flex h-5 w-5 flex-shrink-0 items-center justify-center","aria-hidden":"true",children:[l.jsx("span",{className:"absolute h-4 w-4 rounded-full bg-primary/15"}),l.jsx("span",{className:"relative block h-2 w-2 rounded-full bg-primary"})]}),l.jsx("span",{className:"ml-3 text-sm font-medium text-primary",children:h.label})]}):l.jsx(B,{variant:"none",className:"group !p-0",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"relative flex h-5 w-5 flex-shrink-0 items-center justify-center","aria-hidden":"true",children:l.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-300 group-hover:bg-gray-400"})}),l.jsx("p",{className:"ml-3 text-sm font-medium text-gray-500 group-hover:text-gray-900",children:h.label})]})})},h.key))})})})},q=[{key:I.GENERAL,label:"Général",idx:0},{key:I.DATE,label:"Date",idx:1},{key:I.LOCATION,label:"Localisation",idx:2},{key:I.TICKETS,label:"Types de billets",idx:3},{key:I.RESUME,label:"Résumé",idx:4}],Ze=({event:x,setSuccess:k})=>{const[S,b]=D.useState(0),[h,v]=D.useState({title:x.name,description:x.description||"",tags:[],image:null}),[u,e]=D.useState(new Date),[t,s]=D.useState(new Date),[a,c]=D.useState([{name:"Early Bird",quantity:100,price:5}]),[p,E]=D.useState([{name:"Parking",quantity:750,price:5},{name:"Voucher Boissons (4 pieces)",quantity:500,price:2}]),[d,Y]=D.useState({lat:0,lng:0}),[y,C]=D.useState({}),{data:F,setData:M,post:H}=Ce({location:{street:"",city:"",country:"",zip_code:""},start_date:u,end_date:t,tickets:a,extras:p,coords:d,title:h.title,description:h.description,tags:h.tags,image:h.image}),T=()=>!u||!t?(C({...y,date:"Veuillez sélectionner une date ou marquer comme 'Date à déterminer'."}),!1):u>t?(C({...y,date:"La date de fin ne peut pas être antérieure à la date de début."}),!1):t.getTime()-u.getTime()<36e5?(C({...y,date:"La durée de l'événement doit être d'au moins 1 heure."}),!1):(C({}),!0),L=()=>!d.lat||!d.lng||d.lat===0&&d.lng===0?(C({...y,location:"Veuillez sélectionner une localisation."}),!1):F.location.city?(C({}),!0):(C({...y,location:"Veuillez sélectionner une ville."}),!1),J=()=>a.length===0?(C({...y,tickets:"Veuillez ajouter au moins un type de billet."}),!1):a.some(P=>P.quantity==0)||p.some(P=>P.quantity==0)?(C({...y,tickets:"Veuillez ajouter une quantité pour chaque type de billet ou d'extra."}),!1):(C({}),!0),X=()=>{if(!h.title)return C({...y,name:"Veuillez renseigner un nom pour votre événement."}),!1;if(h.image){if(h.image.size>2097152)return C({...y,image:"L'image ne doit pas dépasser 2Mo."}),!1;if(h.image.type!=="image/jpeg"&&h.image.type!=="image/png"&&h.image.type!=="image/jpg"&&h.image.type!=="image/svg"&&h.image.type!=="image/webp"&&h.image.type!=="image/avif")return C({...y,image:"L'image doit être de type WEBP, AVIF, SVG, PNG, JPG ou JPEG."}),!1}return C({}),!0},N=q[S],G=q.findIndex(P=>P.key===N.key),U=()=>{let P=!1;N.key===I.GENERAL?P=X():N.key===I.DATE?P=T():N.key===I.LOCATION?P=L():N.key===I.TICKETS&&(P=J()),P&&(S===q.length-2&&K(),b(V=>V+1))},K=()=>{H(route("events.configure",{id:x.id}),{data:{...F,tags:h.tags},onSuccess:P=>{k(!0),console.log(P)},onError:P=>{console.error(P)}})},$=()=>{N.key===I.TICKETS&&Y({lat:0,lng:0}),b(P=>P-1)};return D.useEffect(()=>{M("start_date",u),M("end_date",t)},[u,t]),D.useEffect(()=>{M("tickets",a),M("extras",p)},[a,p]),D.useEffect(()=>{M("coords",d)},[d]),D.useEffect(()=>{M("title",h.title),M("description",h.description),M("tags",h.tags),M("image",h.image),console.log("new tags",h.tags)},[h]),l.jsxs("div",{className:"flex items-stretch justify-between h-full",children:[l.jsxs("div",{className:"hidden md:block border-r border-border p-4 w-1/4 ",children:[l.jsx(Te,{children:x.name}),l.jsx(Ae,{}),l.jsx($e,{currentStep:S,steps:q})]}),l.jsxs("div",{className:"flex flex-col p-6 md:p-8 w-full md:w-3/4 h-full",children:[l.jsxs("div",{className:"overflow-y-auto h-[490px]",children:[S<q.length-1&&l.jsxs(ze,{variant:"outline",className:"mb-1",children:["Étape ",G+1," / ",q.length]}),l.jsx(ue,{title:N.key===I.GENERAL?"Informations générales":I.DATE?"Quand aura lieu votre événement ?":N.key===I.LOCATION?"Où aura lieu votre événement ?":N.key===I.TICKETS?"Quels types de billets proposez-vous ?":"",level:"h2"}),l.jsxs("div",{className:"my-4 px-1",children:[N.key===I.GENERAL&&l.jsx(We,{informations:h,setInformations:v,errors:y}),N.key===I.DATE&&l.jsx(Ye,{errors:y,startDate:u,setStartDate:e,endDate:t,setEndDate:s}),N.key===I.LOCATION&&l.jsx(Ue,{setData:M,errors:y,coords:d,setCoords:Y}),N.key===I.TICKETS&&l.jsx(Xe,{errors:y,extras:p,setExtras:E,tickets:a,setTickets:c}),N.key===I.RESUME&&l.jsx("div",{className:"w-full h-full flex justify-center items-center ",children:l.jsx(ue,{level:"h1",title:"Vos paramètres sont sauvegardés",className:" absolute top-[50%] translate-y-[-50%] block text-center"})})]})]}),N.key!==I.RESUME&&l.jsx("div",{className:"flex justify-end items-center mt-auto",children:l.jsxs("div",{className:"flex items-center gap-4",children:[S>0&&l.jsxs(B,{variant:"outline",onClick:$,children:[l.jsx(Ge,{}),"Précédent"]}),l.jsxs(B,{onClick:U,className:"",children:[S===q.length-1?"Sauvegarder":"Suivant",l.jsx(Ve,{})]})]})})]})]})},et=({event:x})=>{const k=x.status==="not_configured",[S,b]=D.useState(!1);return l.jsxs(l.Fragment,{children:[S&&l.jsx(Je,{width:window.innerWidth,height:window.innerHeight,recycle:!1}),l.jsx(_e,{open:k,children:l.jsx(Re,{className:"rounded-sm w-[90%] md:w-full md:max-w-4xl !p-0 bg-gray-50  md:h-[600px]",children:l.jsx(Be,{children:l.jsx(Ze,{event:x,setSuccess:b})})})})]})},tt=[{title:"Vue d'ensemble",panel:"overview"},{title:"Transactions",panel:"transactions"},{title:"Billets",panel:"tickets"},{title:"Paramètres",panel:"settings"}],dt=({event:x,children:k})=>{const{url:S,props:{permissions:b}}=ke(),h=()=>{ye.post(route("events.publish",{event:x.id}),{},{replace:!0,onSuccess:({props:{flash:u}})=>{ge({title:"Succès",description:u.success})},onError:u=>{ge({title:"Erreur",description:u.error})}})},v=()=>{ye.get(route("events.preview",{event:x.id}))};return l.jsxs(Ke,{container:!1,children:[l.jsx(De,{className:"border-b border-border",title:x.name,actions:l.jsxs(l.Fragment,{children:[l.jsx(B,{onClick:v,variant:"secondary",children:"Prévisualiser"}),l.jsx(B,{onClick:h,children:x.status==="draft"?"Publier":"Dépublier"})]})}),l.jsx(et,{event:x}),l.jsx("nav",{className:"bg-accent text-accent-foreground/60 border-b border-border",children:l.jsx("div",{className:"container flex justify-between items-center h-14",children:l.jsx("ul",{className:"flex space-x-6 overflow-x-auto",children:tt.map((u,e)=>{var s;const t=window.location.pathname.split("/").pop()===x.id?u.panel==="overview":u.panel===((s=window.location)==null?void 0:s.pathname.split("/").pop());return l.jsx("li",{children:l.jsx(Me,{as:"button",href:u.panel==="#"?"#":route("events.show",{event:x.id,panel:u.panel!=="overview"?u.panel:""}),disabled:u.panel==="settings"&&!b.event.settings,className:Qe("w-auto whitespace-nowrap text-sm font-medium disabled:cursor-not-allowed",{"text-primary":t}),children:l.jsx("span",{children:u.title})})},e)})})})}),l.jsx("div",{className:"container relative",children:k})]})};export{dt as E};
