import{j as r,r as b,W as v,q as N}from"./app-B8O0964f.js";import{F as u}from"./Field-WCVMzMtq.js";import{c as f,B as d}from"./button-YW7AvVGk.js";import{f as k,h as y}from"./dialog-DmYbyGqV.js";import{I as m}from"./label-DwsXhYQC.js";import{T as C}from"./textarea-D9dkLJXe.js";import{t as q}from"./use-toast-DmJmvKL4.js";import{b as w,S}from"./react-icons.esm-C09Qz6R5.js";import"./index-GGXSu8f6.js";import"./index-BYucJXNH.js";const p=({children:n})=>r.jsx("div",{className:"flex gap-4 w-full",children:n}),W=({eventId:n,setOpen:i,data:e})=>{const[c,x]=b.useState((e==null?void 0:e.type)??void 0),{setData:o,post:a,errors:l}=v({type:c,name:(e==null?void 0:e.name)??"",price:(e==null?void 0:e.price)??0,quantity:(e==null?void 0:e.quantity)??0,description:(e==null?void 0:e.description)??""}),g=()=>{x(void 0),i(!1)},h=s=>{x(s),o("type",s)},j=s=>{if(s.preventDefault(),e){a(route("events.tickets.update",{event:n,ticketId:e.id}),{onSuccess:t=>{i(!1),q({title:"Succès",description:t.props.flash.success})},onError:t=>{console.error("errors",t)}});return}else{a(route("events.tickets.store",{event:n}),{onSuccess:()=>i(!1),onError:t=>{console.error("errors",t)}});return}};return r.jsxs("form",{onSubmit:j,className:"space-y-8",children:[r.jsx(T,{type:c,setType:h}),c!==void 0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(p,{children:r.jsx(u,{className:"shrink-0",label:"Nom",id:"name",errors:l,children:r.jsx(m,{id:"name",required:!0,defaultValue:e==null?void 0:e.name,onChange:s=>o("name",s.target.value)})})}),r.jsx(p,{children:r.jsx(u,{className:"shrink-0",label:"Description",id:"description",errors:l,required:!1,children:r.jsx(C,{id:"description",defaultValue:e==null?void 0:e.description,onChange:s=>o("description",s.target.value)})})}),r.jsxs(p,{children:[r.jsx(u,{className:"w-1/2",id:"price",label:"Prix",errors:l,children:r.jsx(m,{id:"price",type:"string",defaultValue:e==null?void 0:e.price,onChange:s=>o("price",Number(s.target.value)),required:!0})}),r.jsx(u,{className:"w-1/2",id:"quantity",label:"Quantité",errors:l,children:r.jsx(m,{id:"quantity",type:"number",defaultValue:e==null?void 0:e.quantity,required:!0,onChange:s=>o("quantity",Number(s.target.value))})})]})]}),r.jsx(D,{type:c,cancel:g})]})},T=({type:n,setType:i})=>r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:f("w-full bg-accent hover:bg-accent-foreground/10 font-medium transition-colors text-accent-foreground rounded-md p-4 text-sm cursor-pointer",{"bg-accent-foreground/10 ring-2 ring-offset-2 ring-primary":n==="admission"}),onClick:()=>{i("admission")},children:[r.jsx(w,{className:"w-4 h-4 mb-2"}),"Billet d'entrée",r.jsxs("p",{className:"hidden md:block text-xs font-normal text-accent-foreground",children:["Un billet d'entrée, un pass VIP etc. ",r.jsx("br",{})," Une personne par billet."]})]}),r.jsxs("div",{className:f("w-full bg-accent hover:bg-accent-foreground/10 font-medium transition-colors text-accent-foreground rounded-md p-4 text-sm cursor-pointer",{"bg-accent-foreground/10 ring-2 ring-offset-2 ring-primary":n==="extra"}),onClick:()=>{i("extra")},children:[r.jsx(S,{className:"w-4 h-4 mb-2"}),"Extra",r.jsx("p",{className:"hidden md:block text-xs font-normal text-accent-foreground",children:"Des tickets boissons, Une place de parking, etc."})]})]}),D=({type:n,cancel:i})=>{const{props:e}=N();return n!==void 0&&r.jsxs(k,{children:[r.jsx(y,{asChild:!0,children:r.jsx(d,{variant:"ghost",onClick:i,children:"Annuler"})}),r.jsxs(d,{type:"submit",disabled:e.permissions.event.tickets.update===!1,children:["Sauvegarder ",n==="extra"?"l'extra":"le billet"]})]})};export{W as CreateTicketForm};
